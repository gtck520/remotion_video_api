# Remotion è§†é¢‘ç”ŸæˆæœåŠ¡ (Video Generation Service)

åŸºäº **Remotion**ã€**Express** å’Œ **React Three Fiber** æ„å»ºçš„é«˜æ€§èƒ½è§†é¢‘ç”Ÿæˆ APIã€‚ä¸“ä¸º **n8n** è‡ªåŠ¨åŒ–å·¥ä½œæµå’Œ **AI Agent (MCP)** é›†æˆè€Œè®¾è®¡ï¼Œæ”¯æŒ 2D/3D æ··åˆæ¸²æŸ“ã€ç‰©ç†æ¨¡æ‹Ÿå’Œæ™ºèƒ½æ’ç‰ˆã€‚

## ğŸŒŸ æ ¸å¿ƒç‰¹æ€§

- **ğŸ¤– AI å‹å¥½å‹ Schema**: ä¸“ä¸º LLM è®¾è®¡çš„ `SmartExplainer` ç»„ä»¶ï¼Œåªéœ€æä¾›æ–‡æœ¬å³å¯ç”Ÿæˆä¸“ä¸šæ¼”ç¤ºè§†é¢‘ã€‚
- **ğŸ§Š 3D & ç‰©ç†å¼•æ“**: é›†æˆ `React Three Fiber` å’Œ `Matter.js`ï¼Œæ”¯æŒ 3D äº§å“å±•ç¤ºã€é‡åŠ›æ‰è½å’Œç²’å­æµä½“æ•ˆæœã€‚
- **ğŸ”Œ MCP åŸç”Ÿæ”¯æŒ**: å®ç° Model Context Protocol (SSE)ï¼Œå…è®¸ Claude/Cursor ç›´æ¥è°ƒç”¨æ¸²æŸ“èƒ½åŠ›ã€‚
- **âš¡ é«˜æ€§èƒ½æ¶æ„**: åŸºäº Bun è¿è¡Œæ—¶ï¼Œå†…ç½®å¹¶å‘æ§åˆ¶å’Œæ¸²æŸ“é˜Ÿåˆ—ï¼Œæ”¯æŒ Docker éƒ¨ç½²ã€‚
- **ğŸ§© æ¨¡å—åŒ–åœºæ™¯**: æ‹¥æœ‰ `MasterSequence` ä¸»æ§æ¨¡ç‰ˆï¼Œæ”¯æŒ 15+ ç§åŸå­åœºæ™¯è‡ªç”±ç»„åˆã€‚

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. å®‰è£…ä¸å¯åŠ¨

æ¨èä½¿ç”¨ [Bun](https://bun.sh/) ä»¥è·å¾—æœ€ä½³æ€§èƒ½ã€‚

```bash
# å®‰è£…ä¾èµ–
bun install

# å¤åˆ¶ç¯å¢ƒå˜é‡
cp .env.example .env

# å¯åŠ¨å¼€å‘æœåŠ¡å™¨ (é»˜è®¤ç«¯å£ 3005)
bun run dev
```

### 2. éªŒè¯æœåŠ¡

è®¿é—® `http://localhost:3005/renders` ç¡®è®¤æœåŠ¡è¿è¡Œæ­£å¸¸ã€‚

---

## ğŸ¤– MCP é›†æˆæŒ‡å— (AI Agent)

æœ¬æœåŠ¡æä¾› MCP (SSE) æ¥å£ï¼Œæ‚¨çš„ AI åŠ©æ‰‹ (Cursor, Windsurf, Claude Desktop ç­‰) å¯ä»¥ç›´æ¥è¿æ¥å¹¶æ§åˆ¶è§†é¢‘ç”Ÿæˆã€‚

### âš ï¸ è¿æ¥é…ç½®ä¿®æ­£

**è¯·æ³¨æ„**ï¼šè¿™æ˜¯ä¸€ä¸ª **SSE (Server-Sent Events)** æœåŠ¡ï¼Œä¸æ˜¯ Stdio å‘½ä»¤è¡Œå·¥å…·ã€‚æ‚¨éœ€è¦å…ˆå¯åŠ¨æœåŠ¡å™¨ï¼Œç„¶åé…ç½® MCP å®¢æˆ·ç«¯è¿æ¥åˆ° SSE ç«¯ç‚¹ã€‚

**é…ç½®æ–‡ä»¶ç¤ºä¾‹ (ä¾‹å¦‚ `claude_desktop_config.json` æˆ– Cursor MCP è®¾ç½®):**

```json
{
  "mcpServers": {
    "remotion-video": {
      "url": "http://localhost:3005/mcp/sse?token=YOUR_VIP_TOKEN_HERE"
    }
  }
}
```

> **æ³¨æ„**: å¦‚æœæ‚¨åœ¨ `.env` ä¸­å¼€å¯äº† `AUTH_REQUIRED=true`ï¼Œå¿…é¡»å°†æ‚¨çš„ Token æ‹¼æ¥åˆ° URL çš„æŸ¥è¯¢å‚æ•°ä¸­ (`?token=...`)ã€‚å¦åˆ™è¿æ¥ä¼šè¢«æ‹’ç»ã€‚

> **é”™è¯¯ç¤ºèŒƒ (è¯·å‹¿æ¨¡ä»¿)**: ä¸è¦åŒæ—¶é…ç½® `command` (node) å’Œ `url`ã€‚æœ¬æœåŠ¡ä½œä¸ºç‹¬ç«‹æœåŠ¡å™¨è¿è¡Œï¼Œä¸éœ€è¦ MCP å®¢æˆ·ç«¯æ¥å¯åŠ¨å®ƒã€‚

---

## ğŸ’¡ AI è‡ªåŠ¨åŒ–å·¥ä½œæµ (n8n / LLM)

è¦ç”Ÿæˆé«˜è´¨é‡è§†é¢‘ï¼Œå»ºè®®é‡‡ç”¨ **"ç¼–å‰§ -> å¯¼æ¼” -> æ¸²æŸ“"** çš„å·¥ä½œæµã€‚

### 1. è·å– Schema
é¡¹ç›®æ ¹ç›®å½•ä¸‹çš„ `schema_export.json` åŒ…å«äº†æ‰€æœ‰å¯ç”¨ç»„ä»¶çš„å®šä¹‰ã€‚å°†å…¶å†…å®¹ä½œä¸º "System Prompt" çš„ä¸€éƒ¨åˆ†æä¾›ç»™ LLMã€‚

### 2. ä½¿ç”¨ SmartExplainer (æ™ºèƒ½æ¼”ç¤º)
è¿™æ˜¯æœ€å¼ºå¤§çš„é€šç”¨ç»„ä»¶ï¼ŒLLM åªéœ€å†³å®š "è®²ä»€ä¹ˆ" å’Œ "æ€ä¹ˆè®² (ç‰ˆå¼)"ã€‚

**æ”¯æŒçš„ Layouts:**
- **`Title`**: ç« èŠ‚å°é¢ï¼Œå¤§æ ‡é¢˜+å‰¯æ ‡é¢˜ã€‚
- **`BulletList`**: çŸ¥è¯†ç‚¹åˆ—ä¸¾ï¼Œé€æ¡æ˜¾ç¤ºã€‚
- **`Quote`**: é‡‘å¥å¼•ç”¨ï¼Œå¼ºè°ƒæ ¸å¿ƒè§‚ç‚¹ã€‚
- **`SplitImage`**: å·¦æ–‡å³å›¾ï¼Œé€‚åˆæ¡ˆä¾‹å±•ç¤ºã€‚
- **`BigStat`**: å·¨å¤§æ•°å­—ï¼Œå¼ºè°ƒæ•°æ®ã€‚

**LLM ç”Ÿæˆç¤ºä¾‹ (JSON):**
```json
{
  "type": "SmartExplainer",
  "durationInFrames": 150,
  "props": {
    "layout": "BulletList",
    "title": "Remotion çš„ä¼˜åŠ¿",
    "points": ["åŸºäº React", "è§†é¢‘å³ä»£ç ", "å®Œå…¨å¯ç¼–ç¨‹"],
    "theme": "Navy",
    "accentColor": "#60a5fa"
  }
}
```

### 3. ä½¿ç”¨ 3D & ç‰¹æ•ˆç»„ä»¶
- **`ProductShowcase3D`**: 3D ç›’å­å±•ç¤ºï¼Œæ”¯æŒç¯å¢ƒå…‰ç…§å’Œæ—‹è½¬ã€‚
- **`ThreeDText`**: æ‚¬æµ®çš„ 3D æ–‡å­—ã€‚
- **`PhysicsStack`**: ç‰©ä½“å—é‡åŠ›æ‰è½å †å ã€‚
- **`ParticleFlow`**: ç‚«é…·çš„ç²’å­æµåŠ¨èƒŒæ™¯ã€‚

---

## ğŸ¬ å¯ç”¨æ¨¡ç‰ˆ (MasterSequence)

æ¨èå§‹ç»ˆä½¿ç”¨ `MasterSequence` æ¨¡ç‰ˆï¼Œé€šè¿‡ `scenes` æ•°ç»„ç»„åˆä¸åŒåœºæ™¯ã€‚

| åœºæ™¯ç±»å‹ (Type) | æè¿° | æ ¸å¿ƒå‚æ•° |
|:---|:---|:---|
| **SmartExplainer** | **[æ¨è]** æ™ºèƒ½æ’ç‰ˆæ¼”ç¤º | `layout`, `title`, `points`, `theme` |
| **ProductShowcase3D** | **[NEW]** 3D äº§å“å±•ç¤º | `productColor`, `boxSize` |
| **ThreeDText** | **[NEW]** 3D åŠ¨æ€æ–‡å­— | `text`, `size`, `thickness` |
| **PhysicsStack** | **[NEW]** ç‰©ç†æ‰è½æ•ˆæœ | `items` (æ•°ç»„) |
| **ParticleFlow** | **[NEW]** ç²’å­æµåœº | `primaryColor`, `speed` |
| **CyberIntro** | èµ›åšæœ‹å…‹é£æ ¼å¼€åœº | `title`, `glitchIntensity` |
| **IntroTitle** | ç®€çº¦æ ‡é¢˜ | `title`, `subtitle` |
| **KnowledgeCard** | çŸ¥è¯†å¡ç‰‡ | `title`, `points`, `imageUrl` |

---

## ğŸ”Œ API å‚è€ƒ

### æäº¤æ¸²æŸ“ä»»åŠ¡
`POST /renders`

**Body:**
```json
{
  "compositionId": "MasterSequence",
  "inputProps": {
    "scenes": [
      {
        "type": "SmartExplainer",
        "durationInFrames": 120,
        "props": { "layout": "Title", "title": "Hello World" }
      }
    ]
  }
}
```

### æŸ¥è¯¢ä»»åŠ¡çŠ¶æ€
`GET /renders/:jobId`

---

## ğŸ› ï¸ ç»´æŠ¤ä¸æ¸…ç†

- æ¸²æŸ“äº§ç‰©é»˜è®¤ä¿ç•™ 1 å°æ—¶ã€‚
- ä½¿ç”¨ `npm run clean` æ‰‹åŠ¨æ¸…ç† `renders/` ç›®å½•ã€‚
- 3D ç»„ä»¶ä¾èµ– `three` å’Œ `@react-three/fiber`ï¼Œè¯·ç¡®ä¿æ˜¾å¡é©±åŠ¨æ­£å¸¸ (æœåŠ¡ç«¯æ¸²æŸ“ä½¿ç”¨è½¯å…‰æ …åŒ–é€šå¸¸ä¹Ÿå¯ä»¥è¿è¡Œ)ã€‚

## ğŸ“„ è®¸å¯è¯
Private.
